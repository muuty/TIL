

## 2장

2장에선 문서 편집기(lexi)를 설계하며 다양한 디자인 패턴을 사용하는 방법을 설명한다.


#### 1. 문서의 물리적 구조를 표현하기 위한 복합체 패턴
- 요구 사항
  - 문자와 그래픽을 동일하게 다루어야 한다. 서로를 서로의 특별한 경우로 처리한다면, 텍스트와 그림을 모두 처리하는 데에 작업이 중복된다.
  - 단일 요소와 그룹 요소를 구분해서 구현하면 안된다. 예를 들면, 2열 5번째 행 10번째 요소가 하나의 문자일 수도 있고, 수많은 하위 요소를 갖는 복잡한 다이어그램일 수도 있다.
- 이런 경우 어떤 패턴을 사용해야하는가? : 복합체 패턴(Composite pattern)
- 복합체 패턴이란?
  - 복합 객체 그룹과 단일 객체를 동일하게 취급하거나 다룰 수 있게 해주는 방식으로, 재귀적 합성을 표현하는 패턴이다.


#### 2. 서로 다른 서식 설정 알고리즘을 위한 전략 패턴
- 요구 사항
  - 문서의 물리적 구조를 적절한 서식에 맞춰 설정해줘야 함
  - 이 때, 물리적 구조와 서식 설정 알고리즘은 분리되있어야 함. 즉, 서식 설정 알고리즘을 바꾼다고 해서 물리적 구조가 변하면 안되며 서식 설정 알고리즘은 쉽게 변경할 수 있어야 함.
- 이런 경우 어떤 패턴을 사용해야 하는가? : 전략 패턴(Strategy Pattern)
- 전략 패턴이란?
  - 실행 중에 알고리즘을 선택할 수 있게 하는 디자인 패턴.
  - 알고리즘을 객체로 캡슐화하는 것이 전략 패턴의 의도.
  - 전략과 동작 환경에 대한 인터페이스를 충분히 일반화해야함.
#### 3. 사용자 인터페이스를 꾸미기 위한 장식자 패턴
- 요구 사항
  - 기존에 존재하는 글리프에 장식을 적용해야함 (boader, 스크롤바)
- 이런 경우 어떤 패턴을 사용해야 하는가? : 데코리이터 패턴
- 데코레이터 패턴이란?
  - 투명한 포함(transparent enclosure) 개념
    - 단일 자식에 기반을 둔 합성과, 호환되는 인터페이스의 개념을 조합한 것
  - 만약 여러 개의 장식을 적용해야 한다면: 이미 갖고 있는 데코레이터 클래스를 동시에 적용한다.
#### 4. 여러 개의 룩앤필 표준을 지원하기 위한 추상 팩토리 패턴
- 요구 사항
  - 여러 개의 기존 룩앤필 표준을 따르게 만드는 동시에 새로운 표준이 나올 떄마다 추가적으로 이들을 쉽게 지원하려고 함.
  - 런타임에도 룩앤필을 변경할 수 있는, 최고의 유연성을 지원하는 설계를 만들어야 함
- 이런 경우 어떤 패턴을 사용해야 하는가? : 추상 팩토리 패턴
- 추상 팩토리 패턴이란?
  - 클래스의 인스턴스를 직접 만들지 않고 관련된 제품 객체의 군을 생성하는 방버을 정의함.
    - guiFactory->CreateScrollbar();
    - MotifFactory, PMFactory, MacFactory 등이 실제 구현을 맡음
  - 추상 팩토리 패턴은 동일 계열의 제품군을 다룰 수 있다는 점에서 다른 생성 패턴과 다름
    - 다른 생성 패턴은 한 종류의 제품 객체만 상대할 수 있음
  - 즉, 추상 팩토리는 여러 가지 제품 group을 생성할 수 있게 도와주는 패턴(GUIFactory->MacFactory)
#### 5. 여러 개의 윈도우 플랫폼을 허용하기 위한 가교 패턴
- 요구 사턴
  - 여러 룩앤필을 지원하기 위해 여러 윈도우 시스템에서 실행되어야 하느 상황
  - 윈도우마다 서로 다른 여러 개의 클래스 계층을 갖고 있고, 이 계층이 서로 호환 가능하다고 볼 수 없기때문에 추상 팩토리 패턴을 사용할 수 없음.
  - 하는 일은 비슷하지만 구현하는 방법은 완전히 다르므로, 윈도우가 하는 일에 대한 추상화와 이를 구현하는 방법의 추상화를 분리해야함.
- 이런 경우 어떤 패턴을 사용할 수 있는가? : 가교 패턴 (Bridge Pattern)
- 가교 패턴이란?
  - 서로 독립적으로 확장되지만 함께 동작해야 하는 개념들을 별도의 클래스 계층으로 분리하는 것이 가교 패턴의 목적
  - Windos와 WindowsImp 클래스를 따로 둔다. 그리고 WindowsImp에선 기능의 구현을 적고 Windows에서 호출하여 사용하도록 한다.
- 예시
  1. 논리적 개념에 해당하는 윈도우,
  2. 그 윈도우에 대한 서로 다른 물리적 구현
  - 이 경우 가교 패턴을 적용하면, 윈도우 시스템에 종속적인 구현과 전혀 상관없이 논리적인 윈도우 추상화를 확장할 수 있고, 추상적 개념과 무관하게 새로운 윈도우 시스템의 구현도 추가할 수 있다.
- 결국

#### 6. 취소 가능한 사용자 연산을 위한 명령 패턴

#### 7. 객체 구조를 접근하고 순회하기 위한 반복잪 ㅐ턴

#### 8. 문서 구조의 구현을 복잡하게 하지 않고 다수의 분석 기능을 제공하기 위한 방문자 패턴